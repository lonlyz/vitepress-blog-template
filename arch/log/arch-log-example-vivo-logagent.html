<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vivo: 大数据日志采集Agent设计实践 | 知识星球</title>
    <meta name="description" content="不积硅步，无以至千里。">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/vitepress-blog-template/assets/style.hz1UbIDt.css" as="style">
    <link rel="preload stylesheet" href="/vitepress-blog-template/vp-icons.css" as="style">
    <script type="module" src="/vitepress-blog-template/assets/chunks/metadata.079420e9.js"></script>
    <script type="module" src="/vitepress-blog-template/assets/app.D1P0Vk3Q.js"></script>
    <link rel="preload" href="/vitepress-blog-template/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/vitepress-blog-template/assets/chunks/theme.FAufiNZT.js">
    <link rel="modulepreload" href="/vitepress-blog-template/assets/chunks/framework.BrYByd3F.js">
    <link rel="modulepreload" href="/vitepress-blog-template/assets/arch_log_arch-log-example-vivo-logagent.md.By47eIZR.lean.js">
    <link rel="icon" type="image/svg+xml" href="/vitepress-blog-template/vitepress-logo-mini.svg">
    <link rel="icon" type="image/png" href="/vitepress-blog-template/vitepress-logo-mini.png">
    <meta name="theme-color" content="#5f67ee">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/vitepress-blog-template/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/vitepress-blog-template/vitepress-logo-mini.svg" width="24" height="24" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>知识星球</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-blog-template/interview/x-interview" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>面试</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>Java</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Java面向对象和基础</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/basic/java-basic-oop" data-v-35975db6><!--[--><span data-v-35975db6>java面向对象基础</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/basic/java-basic-lan-basic" data-v-35975db6><!--[--><span data-v-35975db6>java基础知识体系</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Java进阶-集合框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/collection/java-collection-all" data-v-35975db6><!--[--><span data-v-35975db6>java集合框架详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Java进阶-并发框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/thread/java-thread-x-overview" data-v-35975db6><!--[--><span data-v-35975db6>java并发知识体系</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/thread/java-thread-x-theorty" data-v-35975db6><!--[--><span data-v-35975db6>java并发理论基础</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/thread/java-thread-x-thread-basic" data-v-35975db6><!--[--><span data-v-35975db6>java线程理论基础</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/thread/java-thread-x-juc-overview" data-v-35975db6><!--[--><span data-v-35975db6>java J.U.C基础</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Java进阶-IO框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/io/java-io-overview" data-v-35975db6><!--[--><span data-v-35975db6>Java IO/NIO/AIO详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>java进阶-新版本特性</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/java8/java8" data-v-35975db6><!--[--><span data-v-35975db6>java 8特性</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/java8up/java-8-up-overview" data-v-35975db6><!--[--><span data-v-35975db6>java 8以上版本特性</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/java8up/java9-11" data-v-35975db6><!--[--><span data-v-35975db6>java 8升级java 11</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/java8up/java12-17" data-v-35975db6><!--[--><span data-v-35975db6>java 11升级java 17</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>java进阶-JVM</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/jvm/java-jvm-classload" data-v-35975db6><!--[--><span data-v-35975db6>java类加载机制</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/jvm/java-jvm-class" data-v-35975db6><!--[--><span data-v-35975db6>java字节码和增强技术</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/jvm/java-jvm-struct" data-v-35975db6><!--[--><span data-v-35975db6>java内存结构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/jvm/java-jvm-gc" data-v-35975db6><!--[--><span data-v-35975db6>java垃圾回收</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/java/jvm/java-jvm-debug-tools-linux" data-v-35975db6><!--[--><span data-v-35975db6>java调试排错</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>开发</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>开发 - 常用开发基础</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/package/dev-package-x-overview" data-v-35975db6><!--[--><span data-v-35975db6>常用类库详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/regex/dev-regex-all" data-v-35975db6><!--[--><span data-v-35975db6>正则表达式详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/cron/dev-cron-x-usage" data-v-35975db6><!--[--><span data-v-35975db6>CRON表达式详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/protocol/dev-protocol-overview" data-v-35975db6><!--[--><span data-v-35975db6>网络协议和工具详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/security/dev-security-overview" data-v-35975db6><!--[--><span data-v-35975db6>安全相关详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>开发 - 质量保障</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/ut/dev-ut-unit-test" data-v-35975db6><!--[--><span data-v-35975db6>单元测试详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/ut/dev-qt-code-style" data-v-35975db6><!--[--><span data-v-35975db6>统一风格详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/ut/dev-qt-sonarlint" data-v-35975db6><!--[--><span data-v-35975db6>质量管理详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>开发 - 代码重构</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/develop/refactor/dev-refactor-if-else" data-v-35975db6><!--[--><span data-v-35975db6>代码重构相关</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>spring</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Spring Framework(v5.3)</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/spring" data-v-35975db6><!--[--><span data-v-35975db6>Spring框架知识体系</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/spring-x-framework-introduce" data-v-35975db6><!--[--><span data-v-35975db6>Spring框架组成</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/spring-x-framework-ioc" data-v-35975db6><!--[--><span data-v-35975db6>控制反转(IOC)</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/spring-x-framework-aop" data-v-35975db6><!--[--><span data-v-35975db6>面向切面编程(AOP)</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/spring-x-framework-springmvc" data-v-35975db6><!--[--><span data-v-35975db6>SpringMVC</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>SpringBoot系列(v2.5)</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot知识体系</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-hello-world" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot入门</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-interface-response" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot接口设计和实现</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-mysql-jpa" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot集成MySQL</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-mysql-shardingjdbc" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot集成ShardingJDBC</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-redis-jedis" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot集成Redis</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-postgre-jpa" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot集成Postgre</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-elastic-template" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot集成ElasticSearch</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-socket-websocket" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot集成Socket</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-task-timer" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot定时任务</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-view-thymeleaf" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot后端视图</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-x-monitor-actuator" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot监控</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/spring/springboot/springboot-y-auo-config" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot进阶</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>数据库</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>数据库基础和原理</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/db/sql/sql-db" data-v-35975db6><!--[--><span data-v-35975db6>数据库原理</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/db/sql-lan/sql-lan" data-v-35975db6><!--[--><span data-v-35975db6>SQL语言</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>SQL 数据库</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/db/sql-mysql/sql-mysql-overview" data-v-35975db6><!--[--><span data-v-35975db6>MySQL 详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>NoSQL 数据库</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/db/nosql-redis/db-redis-overview" data-v-35975db6><!--[--><span data-v-35975db6>Redis 详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/db/nosql-mongo/mongo" data-v-35975db6><!--[--><span data-v-35975db6>MongoDB 详解</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/db/nosql-es/elasticsearch" data-v-35975db6><!--[--><span data-v-35975db6>ElasticSearch 详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>算法</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>算法基础和思想</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-basic-overview" data-v-35975db6><!--[--><span data-v-35975db6>数据结构基础</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-sort-overview" data-v-35975db6><!--[--><span data-v-35975db6>常见排序算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-core-divide-and-conquer" data-v-35975db6><!--[--><span data-v-35975db6>算法思想</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>一些领域算法</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-security-degist" data-v-35975db6><!--[--><span data-v-35975db6>安全算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-char-match" data-v-35975db6><!--[--><span data-v-35975db6>字符串匹配算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-distribute-overview" data-v-35975db6><!--[--><span data-v-35975db6>分布式系统算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-bigdata-overview" data-v-35975db6><!--[--><span data-v-35975db6>海量数据处理</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-load-balance" data-v-35975db6><!--[--><span data-v-35975db6>负载均衡算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-suggest" data-v-35975db6><!--[--><span data-v-35975db6>推荐算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-machine" data-v-35975db6><!--[--><span data-v-35975db6>数据挖掘算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-domain-id-snowflake" data-v-35975db6><!--[--><span data-v-35975db6>ID生成算法</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>其它算法相关</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/algorithm/alg-other-mind" data-v-35975db6><!--[--><span data-v-35975db6>头脑风暴</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>框架|中间件</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Web 容器</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/framework/tomcat/tomcat-overview" data-v-35975db6><!--[--><span data-v-35975db6>Tomcat 源码详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>ORM 框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/framework/orm-mybatis/mybatis-overview" data-v-35975db6><!--[--><span data-v-35975db6>MyBatis 源码详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>分表分库框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/framework/ds-sharding/sharding-overview" data-v-35975db6><!--[--><span data-v-35975db6>ShardingSphere 详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>消息队列框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/framework/kafka/kafka" data-v-35975db6><!--[--><span data-v-35975db6>kafka 详解</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>架构</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>架构基础和技术点</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-x-overview" data-v-35975db6><!--[--><span data-v-35975db6>架构知识体系</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-x-view" data-v-35975db6><!--[--><span data-v-35975db6>从角色视角看架构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-x-view-2" data-v-35975db6><!--[--><span data-v-35975db6>从分层视角看架构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-x-evolution" data-v-35975db6><!--[--><span data-v-35975db6>从演化视角看架构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-x-pattern" data-v-35975db6><!--[--><span data-v-35975db6>从模式视角看架构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-y-cache" data-v-35975db6><!--[--><span data-v-35975db6>高并发之缓存</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-y-ratelimit" data-v-35975db6><!--[--><span data-v-35975db6>高并发之限流</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-y-reduce" data-v-35975db6><!--[--><span data-v-35975db6>高并发之降级和熔断</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-y-loadbalance" data-v-35975db6><!--[--><span data-v-35975db6>高可用之负载均衡</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/basic/arch-y-backup" data-v-35975db6><!--[--><span data-v-35975db6>高可用之容灾备份</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>分布式系统</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/distribute/arch-z-theory" data-v-35975db6><!--[--><span data-v-35975db6>分布式理论和一致性算法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/distribute/arch-z-id" data-v-35975db6><!--[--><span data-v-35975db6>全局唯一ID实现方案</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/distribute/arch-z-lock" data-v-35975db6><!--[--><span data-v-35975db6>分布式锁及实现方案</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/distribute/arch-z-transection" data-v-35975db6><!--[--><span data-v-35975db6>分布式事务及实现方案</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/distribute/arch-z-job" data-v-35975db6><!--[--><span data-v-35975db6>分布式任务及实现方案</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/distribute/arch-z-session" data-v-35975db6><!--[--><span data-v-35975db6>分布式会话及实现方案</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>微服务系统</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/microservice/arch-m-singleton-2" data-v-35975db6><!--[--><span data-v-35975db6>微服务系统和设计</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>系统设计之商业业务平台</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/business/arch-example-seckill" data-v-35975db6><!--[--><span data-v-35975db6>秒杀抽奖相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/business/arch-example-goods-detail" data-v-35975db6><!--[--><span data-v-35975db6>电商交易相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/business/arch-example-meituan-jishiwuliu" data-v-35975db6><!--[--><span data-v-35975db6>仓储物流相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/business/arch-example-xianyu-laxintoufang" data-v-35975db6><!--[--><span data-v-35975db6>拉新投放相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/business/arch-example-meituan-waimai" data-v-35975db6><!--[--><span data-v-35975db6>其它综合相关设计</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>系统设计之数据仓库平台</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-db-hp" data-v-35975db6><!--[--><span data-v-35975db6>数据库架构相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-db-binlog" data-v-35975db6><!--[--><span data-v-35975db6>数据同步相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-data-cangchu" data-v-35975db6><!--[--><span data-v-35975db6>数据仓库相关设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-data-zhili" data-v-35975db6><!--[--><span data-v-35975db6>数据治理相关设计</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>工具|部署</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/tool/tool-list-overview" data-v-35975db6><!--[--><span data-v-35975db6> 工具清单  </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/tool/tool-git" data-v-35975db6><!--[--><span data-v-35975db6> 开发工具详解  </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/tool/linux" data-v-35975db6><!--[--><span data-v-35975db6> Linux  </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/vitepress-blog-template/tool/docker-00-overview" data-v-35975db6><!--[--><span data-v-35975db6> 容器化 - Docker  </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>主题</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>架构基础 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-overview" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> ♥架构 - 知识体系详解♥ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-basic" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 架构基础: 特点,本质... </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-view" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解构架的视角 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-view-2" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解构架的分层 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-evolution" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解架构的演进 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-service" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解架构的服务演化 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-pattern" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解架构的模式1 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-pattern-2" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解架构的模式2 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-core-metrics" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 理解架构的核心要素 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-y-cache" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构之高并发：缓存 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-y-ratelimit" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构之高并发：限流 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-y-reduce" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构之高并发：降级和熔断 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-y-loadbalance" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构之高可用：负载均衡 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-y-backup" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构之高可用：容灾备份,故障转移 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-security" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 保障架构安全 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/basic/arch-x-books" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 架构 - 学习资料 </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>分布式系统 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-overview" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> ♥分布式系统 - 知识体系详解♥ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-theory" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 理论基础,理论及一致性算法 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-id" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 全局唯一ID实现方案 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-lock" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式锁及实现方案 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-transection" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式事务及实现方案 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-cache" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式缓存及方案实现 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-job" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式任务及实现方案 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-session" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式会话及实现方案 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-trace" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式服务链路追踪 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-file" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式文件系统 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-store" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式存储系统 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-calculate" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式计算详解 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/distribute/arch-z-wrong" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 分布式系统 - 分布式系统的8个谬误 </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>微服务系统与设计 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/microservice/arch-m-singleton-2" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 走出微服务误区：避免从单体到分布式单体 </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>系统设计之商业业务平台 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-business-overview" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> ♥系统设计之商业业务平台设计♥ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-seckill" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【秒杀抽奖】秒杀系统设计 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-goods-detail" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【电商交易】京东-亿级商品详情页设计 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-xianyu-goods" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【电商交易】闲鱼-亿级商品结构化背后的思考和演进 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-xianyu-jiaoyi" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【电商交易】闲鱼-多状态多操作的交易链路架构演进 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-xianyu-laxintoufang" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【拉新投放】闲鱼-拉新投放系统如何设计 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-xianyu-search" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【综合/其它】闲鱼-复杂搜索系统的可靠性优化之路 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-meituan-peisong" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【仓储物流】美团-配送系统架构演进实践 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-meituan-jishiwuliu" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【仓储物流】美团-即时物流的分布式系统架构设计 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/bussiness/arch-example-meituan-waimai" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 【综合/其它】美团-外卖客户端高可用建设体系 </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible has-active" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>系统设计之日志系统平台 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-meituan-logan" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 美团: 高性能终端实时日志系统建设实践 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-vivo-logagent" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> vivo: 大数据日志采集Agent设计实践 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-meituan-elk" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 美团: 可视化全链路日志追踪 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-meituan-log4j2" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 美团: 日志导致线程Block的这些坑，你不得不防 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-jd-store" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 京东: 秒级百G日志传输存储架构设计与实战 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-meituan-log" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 美团: 如何优雅地记录操作日志？ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-xiecheng" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 携程: 日均TB级数据，携程支付统一日志框架 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/log/arch-log-example-tencent-wx" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 腾讯: 企业微信万亿级日志检索系统 </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>系统设计之网关设计 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/gateway/arch-gateway-mt-shepherd" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 美团: 百亿规模API网关服务Shepherd的设计与实现 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/gateway/arch-gateway-vivo" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> vivo: 微服务 API 网关架构实践 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/gateway/arch-gateway-xc" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8> 唯品会: 高吞吐消息网关的探索与思考 </p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>系统设计之数据仓库 </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-db-hp" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>数据库架构相关设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-db-binlog" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>数据同步相关设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-data-cangchu" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>数据仓库相关设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vitepress-blog-template/arch/datahouse/arch-example-meituan-data-zhili" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>数据治理相关设计</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>目录</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _vitepress-blog-template_arch_log_arch-log-example-vivo-logagent" data-v-39a288b8><div><h1 id="vivo-大数据日志采集agent设计实践" tabindex="-1">vivo: 大数据日志采集Agent设计实践 <a class="header-anchor" href="#vivo-大数据日志采集agent设计实践" aria-label="Permalink to &quot;vivo: 大数据日志采集Agent设计实践&quot;">​</a></h1><blockquote><p>在企业大数据体系建设过程中，数据采集是其中的首要环节。然而，当前行业内的相关开源数据采集组件，并无法满足企业大规模数据采集的需求与有效的数据采集治理，所以大部分企业都采用自研开发采集组件的方式。本文通过在vivo的日志采集服务的设计实践经验，为大家提供日志采集Agent在设计开发过程中的关键设计思路。</p></blockquote><h2 id="一、概述" tabindex="-1">一、概述 <a class="header-anchor" href="#一、概述" aria-label="Permalink to &quot;一、概述&quot;">​</a></h2><p>在企业大数据体系的建设过程中，数据的处理一般包含4个步骤：采集、存储、计算和使用。其中，数据采集，是建设过程中的首要的环节，也是至关重要的环节，如果没有采集就没有数据，更谈不上后续的数据处理与使用。所以，我们看到的企业中的运营报表、决策报表、日志监控、审计日志等的数据来源都是基于数据采集。一般的，我们对数据采集的定义是，把各种分散的源头上的数据（可以包括企业产品的埋点的日志、服务器日志、数据库、IOT设备日志等）统一汇聚到大数据存储组件的过程（如下图所示）。其中，日志文件类型的采集场景，是各种数据采集类型中最常见的一种。接下来，将围绕该场景提出我们的设计实践方案。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-1.png" alt="error.图片加载失败"></p><p>通常，日志采集服务可以分为几个部分（业界常见的架构如下图所示）：日志采集Agent组件（常见的开源采集Agent组件有Flume、Logstash、Scribe等）、采集传输与存储组件（如kafka、HDFS）、采集管理平台。Bees采集服务是vivo自研的日志采集服务，本文章是通过在Bees采集服务中的关键组件bees-agent的开发实践后，总结出一个通用的日志采集Agent设计中的核心技术点和一些关键思考点，希望对大家有用。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-2.png" alt="error.图片加载失败"></p><h2 id="二、特性-能力" tabindex="-1">二、特性&amp;能力 <a class="header-anchor" href="#二、特性-能力" aria-label="Permalink to &quot;二、特性&amp;能力&quot;">​</a></h2><ul><li>具备基本的日志文件的实时与离线采集能力</li><li>基于日志文件，无侵入式采集日志</li><li>具备自定义的过滤超大日志的能力</li><li>具备自定义的过滤采集、匹配采集、格式化的能力</li><li>具备自定义的限速采集的能力</li><li>具备秒级别的实时采集时效性</li><li>具备断点续传能力，升级和停止不丢数据</li><li>具备可视化的、中心化的采集任务管理平台</li><li>丰富的监控指标与告警（包括采集流量、时效性、完整性等）</li><li>低系统资源开销（包括磁盘、内存、CPU及网络等）</li></ul><h2 id="三、设计原则" tabindex="-1">三、设计原则 <a class="header-anchor" href="#三、设计原则" aria-label="Permalink to &quot;三、设计原则&quot;">​</a></h2><ul><li>简单优雅</li><li>健壮稳定</li></ul><h2 id="四、关键设计" tabindex="-1">四、关键设计 <a class="header-anchor" href="#四、关键设计" aria-label="Permalink to &quot;四、关键设计&quot;">​</a></h2><blockquote><p>目前业界流行的日志采集Agent组件，开源的有Flume、Logstash、Scribe、FileBeats、Fluentd等，自研的有阿里的Logtail。它们都有不错的性能与稳定性，如果想要快速上手，可以不妨使用它们。但是一般大企业会有个性化的采集需求，比如采集任务大规模管理、采集限速、采集过滤等，还有采集任务平台化、任务可视化的需求，为了满足上面这些需求我们自研了一个日志采集Agent。</p></blockquote><p>在做一切的设计和开发之前，我们设定了采集Agent最基本的设计原则，即简单优雅、健壮稳定。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-3.png" alt="error.图片加载失败"></p><p>日志文件采集的一般流程会包括：文件的发现与监听、文件读取，日志内容的格式化、过滤、聚合与发送。当我们开始着手开始设计这样一个日志采集Agent时，会遇到不少关键的难点问题，比如：日志文件在哪里？如何发现日志文件新增？如何监听日志内容追加？如何识别一个文件？宕机重启怎么办？如何断点续传？等等问题，接下来，我们针对日志采集Agent设计过程中遇到的关键问题，为大家一一解答。（注：下文出现的文件路径与文件名都为演示样例非真实路径）</p><h3 id="_4-1-日志文件发现与监听" tabindex="-1">4.1 日志文件发现与监听 <a class="header-anchor" href="#_4-1-日志文件发现与监听" aria-label="Permalink to &quot;4.1 日志文件发现与监听&quot;">​</a></h3><h4 id="agent要如何知道采集哪些日志文件呢" tabindex="-1">Agent要如何知道采集哪些日志文件呢？ <a class="header-anchor" href="#agent要如何知道采集哪些日志文件呢" aria-label="Permalink to &quot;Agent要如何知道采集哪些日志文件呢？&quot;">​</a></h4><p>最简单的设计，就是在Agent的本地配置文件中，把需要采集的日志文件路径都一一罗列进去，比如 /home/sample/logs/access1.log、/home/sample/logs/access2.log、/home/sample/logs/access3.log 等，这样Agent通过读取配置文件得到对应的日志文件列表，这样就能遍历文件列表读取日志信息。但是实际情况是，日志文件是动态生成的，像一般tomcat的业务日志，每个小时都会滚动生成一个新的的日志文件，日志名字通常会带上时间戳，命名类似 /data/sample/logs/access.2021110820.log，所以采用直接配置固定的文件列表方式是行不通的。</p><p>所以，我们想到可以使用一个文件夹路径和日志文件名使用正则表达式或者通配符来表示（为了方便，下文统一使用通配符来表示）。机器上的日志一般固定存在某一个目录下，比如 /data/sample/logs/ 下，文件名由于某种规则是滚动产生的（比如时间戳），类似 access.2021110820.log、access.2021110821.log、access.2021110822.log，我们可以简单粗暴使用 access.*.log 的通配方法来匹配这一类的日志，当然实际情况可以根据你需要的匹配粒度去选择你的正则表达式。有了这个通配符方法，我们的Agent就能的匹配滚动产生的一批日志文件了。</p><h4 id="如何持续发现和监听到新产生的日志文件呢" tabindex="-1">如何持续发现和监听到新产生的日志文件呢？ <a class="header-anchor" href="#如何持续发现和监听到新产生的日志文件呢" aria-label="Permalink to &quot;如何持续发现和监听到新产生的日志文件呢？&quot;">​</a></h4><p>由于新的日志文件会由其他应用程序（比如Nginx、Tomcat等）持续的按小时动态产生的，Agent如何使用通配符快速去发现这个新产生的文件呢？</p><p>最容易想到的，是使用轮询的设计方案，即是通过一个定时任务来检查对应目录下的日志文件是否有增加，但是这种简单的方案有个问题，就是如果轮询间隔时间太长，比如间隔设置为10s、5s，那么日志采集的时效性满足不了我们的需求；如果轮询间隔时间太短，比如500ms，大量的无效的轮询检查又会消耗许多CPU资源。幸好，Linux内核给我们提供一种高效的文件事件监听机制：Linux Inotify机制。该机制可监听任意文件的操作，比如文件创建、文件删除和文件内容变更，内核会给应用层一个对应的事件通知。Inotify这种的事件机制比轮询机制高效的多，也不存在CPU空跑浪费系统资源的情况。在java中，使用java.nio.file.WatchService，可以参考如下核心代码：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/**</span></span>
<span class="line"><span> * 订阅文件或目录的变更事件</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public synchronized BeesWatchKey watchDir(File dir, WatchEvent.Kind&lt;?&gt;... watchEvents) throws IOException {</span></span>
<span class="line"><span>    if (!dir.exists() &amp;&amp; dir.isFile()) {</span></span>
<span class="line"><span>        throw new IllegalArgumentException(&quot;watchDir requires an exist directory, param: &quot; + dir);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    Path path = dir.toPath().toAbsolutePath();</span></span>
<span class="line"><span>    BeesWatchKey beesWatchKey = registeredDirs.get(path);</span></span>
<span class="line"><span>    if (beesWatchKey == null) {</span></span>
<span class="line"><span>        beesWatchKey = new BeesWatchKey(subscriber, dir, this, watchEvents);</span></span>
<span class="line"><span>        registeredDirs.put(path, beesWatchKey);</span></span>
<span class="line"><span>        logger.info(&quot;successfully watch dir: {}&quot;, dir);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return beesWatchKey;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>public synchronized BeesWatchKey watchDir(File dir) throws IOException {</span></span>
<span class="line"><span>    WatchEvent.Kind&lt;?&gt;[] events = {</span></span>
<span class="line"><span>            StandardWatchEventKinds.ENTRY_CREATE,</span></span>
<span class="line"><span>            StandardWatchEventKinds.ENTRY_DELETE,</span></span>
<span class="line"><span>            StandardWatchEventKinds.ENTRY_MODIFY</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>    return watchDir(dir, events);</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>综合以上思考，日志文件的发现和日志内容变更的监听，我们使用的是&quot;inotify机制为主+轮询机制兜底&quot;、&quot;通配符&quot;的设计方案，如下图所示：</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-4.png" alt="error.图片加载失败"></p><h3 id="_4-2-日志文件的唯一标识" tabindex="-1">4.2 日志文件的唯一标识 <a class="header-anchor" href="#_4-2-日志文件的唯一标识" aria-label="Permalink to &quot;4.2 日志文件的唯一标识&quot;">​</a></h3><p>要设计日志文件的唯一标识，如果直接使用日志文件的名称是行不通的，日志文件名可能被频繁重复使用，比如，一些应用程序使用的日志框架在输出日志时，对于当前应用正在输出的日志命名是不带任何时间戳信息的，比如固定是 access.log，只有等到当前小时写入文件完毕时，才把文件重命名为 access.2021110820.log，此时新生产的日志文件命名也是 access.log，该文件名对于采集Agent来说是重复的，所以文件名是无法作为文件唯一标识。</p><p>我们想到使用Linux操作系统上的文件inode号作为文件标识符。Unix/Linux文件系统使用inode号来识别不同文件，即使移动文件或重命名文件，inode号是保持不变的，创建一个新文件，会给这个新文件分配一个新的不重复的inode号，这样就能与现有磁盘上的其他文件很好区分。我们使用 ls -i access.log 可以快速查看该文件的inode号，如下代码块所示：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ls -i access.log</span></span>
<span class="line"><span>62651787 access.log</span></span></code></pre></div><p>一般来说，使用系统的inode号作为标识，已经能满足大多数的情况了，但是为了更严谨的考虑，还可以进一步升级方案。因为Linux 的inode号存在复用的情况，这里的&quot;复用&quot;要和&quot;重复&quot;区别一下，在一台机器上的所有文件不会同一时刻出现重复的两个inode号，但是当文件删除后，另一个新文件创建时，这个文件的inode号是可能复用之前删除文件的inode号的，代码逻辑处理不好，很可能造成日志文件漏采集，这一点是要注意的。为了规避这个问题，我们把文件的唯一标识设计为&quot; 文件inode与文件签名组合&quot;，这里的文件签名使用的是该文件内容前128字节的Hash值，代码参考如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>public static String signFile(File file) throws IOException {</span></span>
<span class="line"><span>    String filepath = file.getAbsolutePath();</span></span>
<span class="line"><span>    String sign = null;</span></span>
<span class="line"><span>    RandomAccessFile raf = new RandomAccessFile(filepath, &quot;r&quot;);</span></span>
<span class="line"><span>    if (raf.length() &gt;= SIGN_SIZE) {</span></span>
<span class="line"><span>        byte[] tbyte = new byte[SIGN_SIZE];</span></span>
<span class="line"><span>        raf.seek(0);</span></span>
<span class="line"><span>        raf.read(tbyte);</span></span>
<span class="line"><span>        sign = Hashing.sha256().hashBytes(tbyte).toString();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return sign;</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>关于inode再补充点小知识。Linux inode是会满的，inode的信息存储本身也会消耗一些硬盘空间，因为inode号只是inode内容中的一小部分，inode内容主要是包含文件的元数据信息：如文件的字节数、文件数据block的位置、文件的读写执行权限、文件的时间戳等，可以用stat命令，查看某个文件完整的inode信息（stat access.log）。因为这样的设计，操作系统是将硬盘分成两个区域的：一个是数据区，存放文件数据；另一个是inode区，存放inode所包含的信息。每个inode节点的大小，一般是128字节或256字节。查看每个硬盘分区的inode总数和已经使用的数量，可以使用df -i命令。由于每个文件都必须有一个inode，如果一个日志机器上，日志文件小而且数量太多，是有可能发生操作系统inode用完了即是inode区磁盘满了，但是我们使用的数据区硬盘还未存满的情况。这时，就无法在硬盘上创建新文件。所以在日志打印规范上是要避免产生大量的小日志文件的。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-5.png" alt="error.图片加载失败"></p><h3 id="_4-3-日志内容的读取" tabindex="-1">4.3 日志内容的读取 <a class="header-anchor" href="#_4-3-日志内容的读取" aria-label="Permalink to &quot;4.3 日志内容的读取&quot;">​</a></h3><p>发现并且能有效监听日志文件后，我们应该如何去读取这个日志文件中实时追加的日志内容呢？日志内容的读取，我们期望从日志文件中把每一行的日志内容逐行读取出来，每一行以\n或者\r为分隔符。很显然，我们不能直接简单采用InputStreamReader去读取，因为Reader只能按照字符从头到尾读取整个日志文件，不适合读取实时追加日志内容的情况；最合适的选择应该是使用RandomAccessFile。RandomAccessFile它为代码开发者提供了一个可供设置的指针，通过指针开发者可以访问文件的随机位置，参考下图：</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-6.png" alt="error.图片加载失败"></p><p>通过这种方式，当某一时刻出现线程读取到文件末尾时，只需要记录当前的位置，线程就进入等待状态，直到有新的日志内容写入后，线程又重新启动，启动后可以接着上次的尾部往下读取，代码参考如下。另外，在进程挂或者宕机恢复后，也会用到RandomAccessFile来从指定点位开始读取，不需要从整个文件头部重新读取。关于断点续传的能力后文会提到。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>RandomAccessFile raf = new RandomAccessFile(file, &quot;r&quot;);</span></span>
<span class="line"><span>byte[] buffer;</span></span>
<span class="line"><span>private void readFile() {</span></span>
<span class="line"><span>    if ((raf.length() - raf.getFilePointer()) &lt; BUFFER_SIZE) {</span></span>
<span class="line"><span>        buffer = new byte[(int) (raf.length() - raf.getFilePointer())];</span></span>
<span class="line"><span>    } else {</span></span>
<span class="line"><span>        buffer = new byte[BUFFER_SIZE];</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    raf.read(buffer, 0, buffer.length);</span></span>
<span class="line"><span>}</span></span></code></pre></div><h3 id="_4-4-实现断点续传" tabindex="-1">4.4 实现断点续传 <a class="header-anchor" href="#_4-4-实现断点续传" aria-label="Permalink to &quot;4.4 实现断点续传&quot;">​</a></h3><p>机器宕机、Java进程OOM重启、Agent升级重启等这些是常有的事，那么如何在这些情况下保障采集数据的正确呢？这个问题主要考虑的是采集Agent断点续传的能力。一般的，我们在采集过程中需要记录当前的采集点位（采集点位，即RandomAccessFile中最后的指针指向的位置，一个整型数值），当Agent把对应缓冲区的数据成功发送到kafka后，此时可以先把最新点位的数值更新到内存，并且通过一个定时任务（默认是3s）持久化内存中的采集点位数值到本地的磁盘的点位文件中。这样，当出现进程停止，重新启动时，加载本次磁盘文件中的采集点位，并使用RandomAccessFile移动到对应的点位，实现了从上一次停止的点位继续往下采集的能力，Agent可以恢复到原有的状态，从而实现了断点续传，有效规避重复采集或者漏采集的风险。</p><p>Agent针对的每一个采集任务会有一个对应的点位文件，一个Agent如果有多个采集任务，将会对应多个点位文件。一个点位文件存储的内容格式为JSON数组（如下图所示）。其中file表示任务所采集的文件的名字，inode即文件的inode，pos即position的缩小，表示点位的数值；</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        &quot;file&quot;: &quot;/home/sample/logs/bees-agent.log&quot;,</span></span>
<span class="line"><span>        &quot;inode&quot;: 2235528,</span></span>
<span class="line"><span>        &quot;pos&quot;: 621,</span></span>
<span class="line"><span>        &quot;sign&quot;: &quot;cb8730c1d4a71adc4e5b48931db528e30a5b5c1e99a900ee13e1fe5f935664f1&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>]</span></span></code></pre></div><h3 id="_4-5-实时数据发送" tabindex="-1">4.5 实时数据发送 <a class="header-anchor" href="#_4-5-实时数据发送" aria-label="Permalink to &quot;4.5 实时数据发送&quot;">​</a></h3><blockquote><p>前面主要介绍了，日志文件的实时的发现、实时的日志内容变更监听、日志内容的读取等设计方案，接下来介绍Agent的数据发送。</p></blockquote><p>最简单的模型是，Agent通过Kafka Client把数据直接发送到Kafka分布式消息中间件，这也是一种简洁可行的方案。实际上在Bees的采集链路架构中，在Agent与Kafka的数据链路中我们增加了一个&quot;组件bees-bus“（如下图所示）。</p><p>bees-bus组件主要起到汇聚数据的作用，类似于Flume在采集链路中聚合的角色。Agent基于Netty开源框架实现NettyRpcClient与Bus之间通讯实现数据发送。网络传输部分展开讲内容较多，非本文章重点就此带过（具体可参考Flume NettyAvroRpcClient实现）。</p><p>这里稍微补充下，我们引入bees-bus的目的主要有以下几个：</p><ul><li>收敛来自于Agent过多的网络连接数，避免所有Agent直连Kafka broker对其造成较大的压力；</li><li>数据汇聚到Bus后，Bus具备流量多路输出的能力，可以实现跨机房Kafka数据容灾；</li><li>在遇到流量陡增的情况下， 会导致topic分区所在broker机器磁盘IO繁忙进而导致数据反压到客户端， 由于kafka副本迁移比较耗时所以出现问题后恢复较慢，Bus可以起到一层缓冲层的作用。</li></ul><p><img src="/vitepress-blog-template/images/arch/log/log-agent-7.png" alt="error.图片加载失败"></p><h3 id="_4-6-离线采集能力" tabindex="-1">4.6 离线采集能力 <a class="header-anchor" href="#_4-6-离线采集能力" aria-label="Permalink to &quot;4.6 离线采集能力&quot;">​</a></h3><blockquote><p>除了上面常见的实时日志采集的场景外（一般是日志采集到kafka这类消息中间件），Bees采集还有一个离线日志采集的场景。所谓离线日志采集，一般是指把日志文件是采集到HDFS下（参考下图）。</p></blockquote><p>这些日志数据是用于下游的Hive离线数仓建设、离线报表分析使用。该场景数据时效性没有那么强，一般是按天为单位使用数据（我们常说的T+1数据），所以日志数据采集无需像实时日志采集一样，实时的一行一行的采集。离线采集一般可以按照固定时间一个批次采集。我们默认是每隔一小时定时采集上个小时产生的一个完整的小时日志文件，比如在21点的05分，采集Agent则开始采集上个小时产生的日志文件（access.2021110820.log），该文件保存了20点内产生的完整的（20:00~20:59）日志内容。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-8.png" alt="error.图片加载失败"></p><p>实现离线的采集能力，我们的Agent通过集成HDFS Client的基本能力来实现，HDFS Client中使用 FSDataOutputStream 可以快速的完成一个文件PUT到HDFS的目录下。</p><p>尤其要关注的一点是，离线采集需要特别的增加了一个限流采集的能力。由于离线采集的特点是，在整点左右的时刻，所有的机器上的Agent会几乎同时全量开启采集，如果日志量大、采集速度过快，可能会造成该时刻公司网络带宽被快速占用飙升，超出全网带宽上限，进一步会影响其他业务的正常服务，引发故障；还有一个需要关注的就是离线采集整点时刻对机器磁盘资源的需求是很大，通过限流采集，可以有效削平对磁盘资源的整点峰值，避免影响其他服务。</p><h3 id="_4-7-日志文件清理策略" tabindex="-1">4.7 日志文件清理策略 <a class="header-anchor" href="#_4-7-日志文件清理策略" aria-label="Permalink to &quot;4.7 日志文件清理策略&quot;">​</a></h3><blockquote><p>业务日志源源不断的产生落到机器的磁盘上，单个小时的日志文件大小，小的可能是几十MB，大的可以是几十GB，磁盘很有可能在几小时内被占满，导致新的日志无法写入造成日志丢失，另一方面可能导致更致命的问题，linux 操作系统报 “No space left on device 异常&quot;，引发其他进程的各种故障；所以机器上的日志文件需要有一个清理的策略。</p></blockquote><p>我们采用的策略是，所有的机器都默认启动了一个shell的日志清理脚本，定期检查固定目录下的日志文件，规定日志文件的生命周期为6小时，一旦发现日志文件是6小时以前的文件，则会对其进行删除（执行 rm 命令）。</p><p>因为日志文件的删除，不是由日志采集Agent自身发起和执行的，那么可能出现”<strong>采集速度跟不上删除速度（采集落后6小时）</strong>“的情况。比如日志文件还在采集，但是删除脚本已经检测到该文件生命周期已达6小时准备对其进行删除；这种情况，我们只需要做好一点，<strong>保证采集Agent对该日志文件的读取句柄是正常打开的，这样的话，即使日志清理进程对该文件执行了rm操作（执行rm后只是将该文件从文件系统的目录结构上解除链接 unlink，实际文件还未从磁盘彻底删除），采集Agent持续打开的句柄，依然能正常采集完此文件</strong>；这种&quot;采集速度跟不上删除速度&quot;是不能长时间存在，也有磁盘满的风险，需要通过告警识别出来，根本上来说，需要通过负载均衡或者降低日志量的方法，来减少单机器日志长时间采集不过来的情况。</p><h3 id="_4-8-系统资源消耗与控制" tabindex="-1">4.8 系统资源消耗与控制 <a class="header-anchor" href="#_4-8-系统资源消耗与控制" aria-label="Permalink to &quot;4.8 系统资源消耗与控制&quot;">​</a></h3><blockquote><p>Agent采集进程是随着业务进程一起部署在一个机器上的，共同使用业务机器的资源（CPU、内存、磁盘、网络），所以在设计时，要考虑控制好Agent采集进程对机器资源的消耗，同时要做好对Agent进程对机器资源消耗的监控。<strong>一方面保障业务有稳定的资源可以正常运行；另外可以保障Agent自身进程正常运作</strong>。</p></blockquote><p>通常我们可以采用以下方案：</p><ol><li><strong>针对CPU的消耗控制</strong>。</li></ol><p>我们可以较方便采用Linux系统层面的CPU隔离的方案来控制，比如TaskSet；通过TaskSet命令，我们可以在采集进程启动时，设定采集进程绑定在某个限定的CPU核心上面（进程绑核，即设定进程与CPU亲和性，设定以后Linux调度器就会让这个进程/线程只在所绑定的核上面去运行）；这样的设定之后，可以保障采集进程与业务进程在CPU的使用上面互相不影响。</p><ol start="2"><li><strong>针对内存的消耗控制</strong>。</li></ol><p>由于采集Agent采用java语言开发基于JVM运行，所以我们可以通过JVM的堆参数配置即可控制；bees-agent一般默认配置512MB，理论上最低值可以是64MB，可以根据实际机器资源情况和采集日志文件大小来配置；事实上，Agent的内存占用相对稳定，内存消耗方面的风险较小。</p><p>3.<strong>针对磁盘的消耗控制</strong>。</p><p>由于采集Agent是一个IO密集型进程，所以磁盘IO的负载是我们需要重点保障好的；在系统层面没有成熟的磁盘IO的隔离方案，所以只能在应用层来实现。我们需要清楚进程所在磁盘的基准性能情况，然后在这个基础上，通过Agent自身的限速采集能力，设置采集进程的峰值的采集速率（比如：3MB/s、5MB/s）；除此之外，还需要做好磁盘IO负载的基础监控与告警、采集Agent采集速率大小的监控与告警，通过这些监控告警与值班分析进一步保障磁盘IO资源。</p><p>4.<strong>针对网络的消耗控制</strong>。</p><p>这里说的网络，重点要关注是跨机房带宽上限。避免同一时刻，大批量的Agent日志采集导致跨机房的带宽到达了上限，引发业务故障。所以，针对网络带宽的使用也需要有监控与告警，相关监控数据上报到平台汇总计算，平台通过智能计算后给Agent下发一个合理的采集速率。</p><h3 id="_4-9-自身日志监控" tabindex="-1">4.9 自身日志监控 <a class="header-anchor" href="#_4-9-自身日志监控" aria-label="Permalink to &quot;4.9 自身日志监控&quot;">​</a></h3><p>为了更好的监控线上所有的Agent的情况，能够方便地查看这些Agent进程自身的log4j日志是很有必要的。为了达成这一目的，我们把Agent自身产生的日志采集设计成一个普通的日志采集任务，就是说，采集Agent进程自身，自己采集自己产生的日志，于是就可以把所有Agent的日志通过Agent采集汇聚到下游Kafka，再到Elasticsearch存储引擎，最后通过Kibana或其他的日志可视化平台可以查看。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-9.png" alt="error.图片加载失败"></p><h3 id="_4-10-平台化管理" tabindex="-1">4.10 平台化管理 <a class="header-anchor" href="#_4-10-平台化管理" aria-label="Permalink to &quot;4.10 平台化管理&quot;">​</a></h3><p>目前的生产环境Agent实例数量已经好几万，采集任务数量有上万个。为了对这些分散的、数据量多的Agent进行有效的集中的运维和管理，我们设计了一个可视化的平台，管理平台具备以下Agent控制能力：Agent 的现网版本查看，Agent存活心跳管理，Agent采集任务下发、启动、停止管理，Agent采集限速管理等；需要注意的是，Agent与平台的通讯方式，我们设计采用简单的HTTP通讯方式，即Agent以定时心跳的方式（默认5分钟）向平台发起HTTP请求，HTTP请求体中会包含Agent自身信息，比如idc、ip、hostname、当前采集任务信息等，而HTTP返回体的内容里会包含平台向Agent下发的任务信息，比如哪个任务启动、哪个任务停止、任务的具体参数变更等。</p><p><img src="/vitepress-blog-template/images/arch/log/log-agent-10.png" alt="error.图片加载失败"></p><h2 id="五、与开源能力对比" tabindex="-1">五、与开源能力对比 <a class="header-anchor" href="#五、与开源能力对比" aria-label="Permalink to &quot;五、与开源能力对比&quot;">​</a></h2><blockquote><p>bees-agent与flume-agent对比</p></blockquote><ul><li><strong>内存需求大大降低</strong>。bees-agent 采用无 Channel 设计，大大节省内存开销，每个 Agent 启动 ，JVM 堆栈最低理论值可以设置为64MB；</li><li><strong>实时性更好</strong>。bees-agent 采用Linux inotify事件机制，相比 Flume Agent 轮询机制，采集数据的时效性可以在1s以内；</li><li><strong>日志文件的唯一标识</strong>，bees-agent 使用inode+文件签名，更准确，不会出现日志文件误采重采；</li><li><strong>用户资源隔离</strong>。bees-agent 不同 Topic 的日志采集任务，采用不同的线程隔离采集，互相无影响；</li><li><strong>真正的优雅退出</strong>。bees-agent 在正常采集过程中，随时使用平台的&quot;停止命令&quot;让 Agent 优雅退出，不会出现无法退出的尴尬情况，也能保证日志无任何丢失；</li><li><strong>更丰富的指标数据</strong>。bees-agent 包括采集速率、采集总进度，还有 机器信息、JVM 堆情况、类数量、JVM GC次数等；</li><li><strong>更丰富的定制化能力</strong>。bees-agent 具备关键字匹配采集能力、日志格式化能力、平台化管理的能力等；</li></ul><p><img src="/vitepress-blog-template/images/arch/log/log-agent-11.png" alt="error.图片加载失败"></p><h2 id="六、总结" tabindex="-1">六、总结 <a class="header-anchor" href="#六、总结" aria-label="Permalink to &quot;六、总结&quot;">​</a></h2><p>前文介绍了vivo日志采集Agent在设计过程中的一些核心技术点：包括<strong>日志文件的发现与监听、日志文件的唯一标识符设计、日志文件的实时采集与离线采集的架构设计、日志文件的清理策略、采集进程对系统资源的消耗控制、平台化管理的思路</strong>等，这些关键的设计思路覆盖了自研采集agent大部分的核心功能，同时也覆盖了其中的难点痛点，能让后续的开发环节更加畅通。当然，还有一些高阶的采集能力未涵盖本文介绍在内，比如&quot;如何做好日志采集数据的完整性对账&quot;，&quot;数据库类型的场景的采集设计&quot;等，大家可以继续探索解决方案。</p><p>从2019年起，vivo大数据业务的日志采集场景就是由Bees数据采集服务支撑。bees-agent在生产环境持续服务，至今已有3年多的稳定运行的记录，有数万个bees-agent实例正在运行，同时在线支撑数万个日志文件的采集，每天采集PB级别的日志量。实践证明，bees-agent的稳定行、健壮性、丰富的功能、性能与合理的资源情况，都符合最开始设计的预期，本文的设计思路的也一再被证实行之有效。</p><h2 id="文章来源" tabindex="-1">文章来源 <a class="header-anchor" href="#文章来源" aria-label="Permalink to &quot;文章来源&quot;">​</a></h2><p>转载说明:</p><ul><li>作者：vivo 互联网存储技术团队- Qiu Sidi</li><li>版权声明：本文为「 vivo互联网技术」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。</li><li>原文链接：<a href="https://mp.weixin.qq.com/s/Wya9TLEZpVkypiAmyZ%5C_V%5C_Q" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/Wya9TLEZpVkypiAmyZ\_V\_Q</a></li></ul><p>本文转自 <a href="https://pdai.tech" target="_blank" rel="noreferrer">https://pdai.tech</a>，如有侵权，请联系删除。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--[--><!--[--><!--[--><div style="" class="vitepress-backTop-main" title="返回顶部" data-v-69be28d1><svg t="1720595052079" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4279" width="200" height="200" data-v-69be28d1><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#FFF" p-id="4280" data-v-69be28d1></path></svg></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-e257564d><!----><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>最后更新于: <time datetime="2025-01-24T08:12:26.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/vitepress-blog-template/arch/log/arch-log-example-meituan-logan" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一页</span><span class="title" data-v-e257564d> 美团: 高性能终端实时日志系统建设实践 </span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/vitepress-blog-template/arch/log/arch-log-example-meituan-elk" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一页</span><span class="title" data-v-e257564d> 美团: 可视化全链路日志追踪 </span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><div style="margin-top:24px;"><!----></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2024-2025 lz</p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>