import{_ as s,c as n,ai as p,o as e}from"./chunks/framework.BrYByd3F.js";const u=JSON.parse('{"title":"Windows 打包EXE部署","description":"","frontmatter":{},"headers":[],"relativePath":"develop/usage/dev-usage-exe-package.md","filePath":"develop/usage/dev-usage-exe-package.md","lastUpdated":1737706346000}'),l={name:"develop/usage/dev-usage-exe-package.md"};function i(t,a,r,o,c,d){return e(),n("div",null,a[0]||(a[0]=[p(`<h1 id="windows-打包exe部署" tabindex="-1">Windows 打包EXE部署 <a class="header-anchor" href="#windows-打包exe部署" aria-label="Permalink to &quot;Windows 打包EXE部署&quot;">​</a></h1><blockquote><p>打包内容: Java，MySQL，Springboot JAR + 第三方dll组件。</p></blockquote><blockquote><p>对于一些简单的WEB应用，使用诸如java,SQL,JAR/WAR期望将其统一打包成一个EXE安装包进行安装，并将其注册为Windows的服务。@pdai</p></blockquote><blockquote><p>2019-03-14 JWS在新版本中要收费，我去他大爷的。配置起来这么麻烦，远不及winsw.</p></blockquote><h2 id="准备" tabindex="-1">准备 <a class="header-anchor" href="#准备" aria-label="Permalink to &quot;准备&quot;">​</a></h2><h2 id="工具" tabindex="-1">工具 <a class="header-anchor" href="#工具" aria-label="Permalink to &quot;工具&quot;">​</a></h2><p>Inno Setup第一印象参考:</p><ul><li><a href="https://www.jianshu.com/p/437752af192a" target="_blank" rel="noreferrer">https://www.jianshu.com/p/437752af192a</a></li><li><a href="https://blog.csdn.net/itas109/article/details/78801199" target="_blank" rel="noreferrer">https://blog.csdn.net/itas109/article/details/78801199</a></li><li><a href="https://blog.csdn.net/qq%5C_19558705/article/details/80968807" target="_blank" rel="noreferrer">https://blog.csdn.net/qq\\_19558705/article/details/80968807</a></li><li><a href="https://blog.csdn.net/pyj11111pyj/article/details/80992483" target="_blank" rel="noreferrer">https://blog.csdn.net/pyj11111pyj/article/details/80992483</a></li></ul><p>下载 Inno Setup Compile 5.6.</p><ul><li><a href="http://www.jrsoftware.org/isdl.php" target="_blank" rel="noreferrer">http://www.jrsoftware.org/isdl.php</a></li></ul><p>依据引导配置生成如下代码:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>; Script generated by the Inno Setup Script Wizard.</span></span>
<span class="line"><span>; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#define MyAppName &quot;智能仓库管理系统&quot;</span></span>
<span class="line"><span>#define MyAppVersion &quot;0.1.5&quot;</span></span>
<span class="line"><span>#define MyAppPublisher &quot;康禾科技&quot;</span></span>
<span class="line"><span>#define MyAppURL &quot;https://localhost:8081/admin/&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Setup]</span></span>
<span class="line"><span>; NOTE: The value of AppId uniquely identifies this application.</span></span>
<span class="line"><span>; Do not use the same AppId value in installers for other applications.</span></span>
<span class="line"><span>; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)</span></span>
<span class="line"><span>AppId={{038D6A71-180E-4CAB-AC9B-20DFFC791881}</span></span>
<span class="line"><span>AppName={#MyAppName}</span></span>
<span class="line"><span>AppVersion={#MyAppVersion}</span></span>
<span class="line"><span>;AppVerName={#MyAppName} {#MyAppVersion}</span></span>
<span class="line"><span>AppPublisher={#MyAppPublisher}</span></span>
<span class="line"><span>DefaultDirName=D:\\khkj-store</span></span>
<span class="line"><span>DefaultGroupName={#MyAppName}</span></span>
<span class="line"><span>AllowNoIcons=yes</span></span>
<span class="line"><span>OutputDir=C:\\Users\\pdai\\Desktop\\khkj_resources</span></span>
<span class="line"><span>OutputBaseFilename=Setup</span></span>
<span class="line"><span>SetupIconFile=C:\\Users\\pdai\\Desktop\\khkj_resources\\favicon.ico</span></span>
<span class="line"><span>Password=khkj</span></span>
<span class="line"><span>Compression=lzma</span></span>
<span class="line"><span>SolidCompression=yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Languages]</span></span>
<span class="line"><span>Name: &quot;english&quot;; MessagesFile: &quot;compiler:Default.isl&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Files]</span></span>
<span class="line"><span>Source: &quot;C:\\Users\\pdai\\Desktop\\kjkj-store-install\\*&quot;; DestDir: &quot;{app}&quot;; Flags: ignoreversion recursesubdirs createallsubdirs</span></span>
<span class="line"><span>; NOTE: Don&#39;t use &quot;Flags: ignoreversion&quot; on any shared system files</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Icons]</span></span>
<span class="line"><span>Name: &quot;{group}\\{cm:UninstallProgram,{#MyAppName}}&quot;; Filename: &quot;{uninstallexe}&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Run]</span></span>
<span class="line"><span>Filename: &quot;{app}\\install\\install.bat&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[UninstallRun]</span></span>
<span class="line"><span>Filename:&quot;{app}\\uninstall\\uninstall.bat&quot;;</span></span></code></pre></div><h2 id="jdk" tabindex="-1">JDK <a class="header-anchor" href="#jdk" aria-label="Permalink to &quot;JDK&quot;">​</a></h2><blockquote><p>JDK 的安装需要考虑</p></blockquote><ul><li>下载JDK免安装版本</li><li>环境变量 - JAVA_HOME， CLASS_PATH，PATH</li><li>JDK 的版本 - 特别要考虑jar和dll对版本的依赖</li><li>将dll放置到jdk bin下，最好也放一份到jre下面</li></ul><h2 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;MySQL&quot;">​</a></h2><blockquote><p>MySQL 的安装需要考虑</p></blockquote><ul><li>下载MySQL免安装版本</li><li>MySQL的版本，尽量选择5.7之后的版本；选择8.0之后的版本在POM中引入的jar需要单独配置，并且Dialet不一样，需要单独配置；</li><li>MySQL作为单独的服务进行安装，以服务的方式启动 <a href="https://blog.csdn.net/a1273022039/article/details/79590265" target="_blank" rel="noreferrer">https://blog.csdn.net/a1273022039/article/details/79590265</a></li><li>MySQL数据部分Data文件夹<a href="https://blog.csdn.net/qq%5C_26819733/article/details/52998297" target="_blank" rel="noreferrer">https://blog.csdn.net/qq\\_26819733/article/details/52998297</a></li><li>MySQL data文件夹的迁移<a href="https://www.cnblogs.com/sybblogs/p/5784622.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/sybblogs/p/5784622.html</a></li></ul><h2 id="springboot生成的web-app-的jar" tabindex="-1">SpringBoot生成的web app 的jar <a class="header-anchor" href="#springboot生成的web-app-的jar" aria-label="Permalink to &quot;SpringBoot生成的web app 的jar&quot;">​</a></h2><blockquote><p>有两种方式Java Services Wrapper和winsw</p></blockquote><h3 id="winsw" tabindex="-1">winsw <a class="header-anchor" href="#winsw" aria-label="Permalink to &quot;winsw&quot;">​</a></h3><p>conf配置文件，xml 格式的 参考</p><ul><li><a href="https://blog.csdn.net/rico%5C_zhou/article/details/81283953" target="_blank" rel="noreferrer">https://blog.csdn.net/rico\\_zhou/article/details/81283953</a></li></ul><p>官网</p><ul><li><a href="https://github.com/kohsuke/winsw" target="_blank" rel="noreferrer">https://github.com/kohsuke/winsw</a></li></ul><p>包下载</p><ul><li><a href="https://github.com/kohsuke/winsw/releases" target="_blank" rel="noreferrer">https://github.com/kohsuke/winsw/releases</a></li><li><a href="https://www.nuget.org/packages/WinSW/2.1.1" target="_blank" rel="noreferrer">https://www.nuget.org/packages/WinSW/2.1.1</a></li></ul><p>其它参考资料</p><ul><li><a href="https://www.cnblogs.com/songjn/p/9481514.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/songjn/p/9481514.html</a></li></ul><h3 id="jws方式" tabindex="-1">JWS方式 <a class="header-anchor" href="#jws方式" aria-label="Permalink to &quot;JWS方式&quot;">​</a></h3><p>参考</p><ul><li><a href="http://www.cnblogs.com/qlqwjy/p/9492813.html" target="_blank" rel="noreferrer">http://www.cnblogs.com/qlqwjy/p/9492813.html</a></li></ul><p>JWS下载</p><ul><li><a href="https://sourceforge.net/projects/wrapper/files/wrapper/Wrapper%5C_3.5.30%5C_20160713/" target="_blank" rel="noreferrer">https://sourceforge.net/projects/wrapper/files/wrapper/Wrapper\\_3.5.30\\_20160713/</a></li></ul><p>JWS官网</p><ul><li><a href="https://wrapper.tanukisoftware.com/doc/english/download.jsp" target="_blank" rel="noreferrer">https://wrapper.tanukisoftware.com/doc/english/download.jsp</a></li></ul><p>对于 JSW如果是用Springboot的JAR运行，特别要注意要使用springboot的jarlauncher类，而不是main class 所在的类，这是一个很大的坑 JSW配置参考如下:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>#encoding=UTF-8</span></span>
<span class="line"><span># Configuration files must begin with a line specifying the encoding</span></span>
<span class="line"><span>#  of the the file.</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># NOTE - Please use src/conf/wrapper.conf.in as a template for your</span></span>
<span class="line"><span>#        own application rather than the values used for the</span></span>
<span class="line"><span>#        TestWrapper sample.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper License Properties (Ignored by Community Edition)</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Professional and Standard Editions of the Wrapper require a valid</span></span>
<span class="line"><span>#  License Key to start.  Licenses can be purchased or a trial license</span></span>
<span class="line"><span>#  requested on the following pages:</span></span>
<span class="line"><span># http://wrapper.tanukisoftware.com/purchase</span></span>
<span class="line"><span># http://wrapper.tanukisoftware.com/trial</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Include file problems can be debugged by leaving only one &#39;#&#39;</span></span>
<span class="line"><span>#  at the beginning of the following line:</span></span>
<span class="line"><span>##include.debug</span></span>
<span class="line"><span></span></span>
<span class="line"><span># The Wrapper will look for either of the following optional files for a</span></span>
<span class="line"><span>#  valid License Key.  License Key properties can optionally be included</span></span>
<span class="line"><span>#  directly in this configuration file.</span></span>
<span class="line"><span>#include ../conf/wrapper-license.conf</span></span>
<span class="line"><span>#include ../conf/wrapper-license-%WRAPPER_HOST_NAME%.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># The following property will output information about which License Key(s)</span></span>
<span class="line"><span>#  are being found, and can aid in resolving any licensing problems.</span></span>
<span class="line"><span>#wrapper.license.debug=TRUE</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper Localization</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Specify the language and locale which the Wrapper should use.</span></span>
<span class="line"><span>#wrapper.lang=en_US # en_US or ja_JP</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Specify the location of the language resource files (*.mo).</span></span>
<span class="line"><span>wrapper.lang.folder=..\\lang</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper Java Properties</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Java Application</span></span>
<span class="line"><span>#  Locate the java binary on the system PATH:</span></span>
<span class="line"><span>wrapper.java.command=..\\..\\..\\java\\jdk_1.8_win32\\bin\\java</span></span>
<span class="line"><span>#  Specify a specific java binary:</span></span>
<span class="line"><span>#set.JAVA_HOME=/java/path</span></span>
<span class="line"><span>#wrapper.java.command=%JAVA_HOME%/bin/java</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Tell the Wrapper to log the full generated Java command line.</span></span>
<span class="line"><span>#wrapper.java.command.loglevel=INFO</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Java Main class.  This class must implement the WrapperListener interface</span></span>
<span class="line"><span>#  or guarantee that the WrapperManager class is initialized.  Helper</span></span>
<span class="line"><span>#  classes are provided to do this for you.</span></span>
<span class="line"><span>#  See the following page for details:</span></span>
<span class="line"><span>#  http://wrapper.tanukisoftware.com/doc/english/integrate.html</span></span>
<span class="line"><span>wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Java Classpath (include wrapper.jar)  Add class path elements as</span></span>
<span class="line"><span>#  needed starting from 1</span></span>
<span class="line"><span>wrapper.java.classpath.1=..\\lib\\store.jar</span></span>
<span class="line"><span>wrapper.java.classpath.2=..\\lib\\wrapper.jar</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Java Library Path (location of Wrapper.DLL or libwrapper.so)</span></span>
<span class="line"><span>wrapper.java.library.path.1=..\\lib\\</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Java Bits.  On applicable platforms, tells the JVM to run in 32 or 64-bit mode.</span></span>
<span class="line"><span>wrapper.java.additional.auto_bits=FALSE</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Java Additional Parameters</span></span>
<span class="line"><span>wrapper.java.additional.1=</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Initial Java Heap Size (in MB)</span></span>
<span class="line"><span>#wrapper.java.initmemory=3</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Maximum Java Heap Size (in MB)</span></span>
<span class="line"><span>#wrapper.java.maxmemory=64</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Application parameters.  Add parameters as needed starting from 1</span></span>
<span class="line"><span>wrapper.app.parameter.1=org.springframework.boot.loader.JarLauncher</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper Logging Properties</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Enables Debug output from the Wrapper.</span></span>
<span class="line"><span># wrapper.debug=TRUE</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Format of output for the console.  (See docs for formats)</span></span>
<span class="line"><span>wrapper.console.format=PM</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Log Level for console output.  (See docs for log levels)</span></span>
<span class="line"><span>wrapper.console.loglevel=INFO</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Log file to use for wrapper output logging.</span></span>
<span class="line"><span>wrapper.logfile=../logs/wrapper.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Format of output for the log file.  (See docs for formats)</span></span>
<span class="line"><span>wrapper.logfile.format=LPTM</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Log Level for log file output.  (See docs for log levels)</span></span>
<span class="line"><span>wrapper.logfile.loglevel=INFO</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Maximum size that the log file will be allowed to grow to before</span></span>
<span class="line"><span>#  the log is rolled. Size is specified in bytes.  The default value</span></span>
<span class="line"><span>#  of 0, disables log rolling.  May abbreviate with the &#39;k&#39; (kb) or</span></span>
<span class="line"><span>#  &#39;m&#39; (mb) suffix.  For example: 10m = 10 megabytes.</span></span>
<span class="line"><span>wrapper.logfile.maxsize=0</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Maximum number of rolled log files which will be allowed before old</span></span>
<span class="line"><span>#  files are deleted.  The default value of 0 implies no limit.</span></span>
<span class="line"><span>wrapper.logfile.maxfiles=0</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Log Level for sys/event log output.  (See docs for log levels)</span></span>
<span class="line"><span>wrapper.syslog.loglevel=NONE</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper General Properties</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Allow for the use of non-contiguous numbered properties</span></span>
<span class="line"><span>wrapper.ignore_sequence_gaps=TRUE</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Do not start if the pid file already exists.</span></span>
<span class="line"><span>wrapper.pidfile.strict=TRUE</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Title to use when running as a console</span></span>
<span class="line"><span>wrapper.console.title=Test Wrapper Sample Application</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper JVM Checks</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Detect DeadLocked Threads in the JVM. (Requires Standard Edition)</span></span>
<span class="line"><span>wrapper.check.deadlock=TRUE</span></span>
<span class="line"><span>wrapper.check.deadlock.interval=10</span></span>
<span class="line"><span>wrapper.check.deadlock.action=RESTART</span></span>
<span class="line"><span>wrapper.check.deadlock.output=FULL</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Out Of Memory detection.</span></span>
<span class="line"><span># (Ignore output from dumping the configuration to the console.  This is only needed by the TestWrapper sample application.)</span></span>
<span class="line"><span>wrapper.filter.trigger.999=wrapper.filter.trigger.*java.lang.OutOfMemoryError</span></span>
<span class="line"><span>wrapper.filter.allow_wildcards.999=TRUE</span></span>
<span class="line"><span>wrapper.filter.action.999=NONE</span></span>
<span class="line"><span>#  Ignore -verbose:class output to avoid false positives.</span></span>
<span class="line"><span>wrapper.filter.trigger.1000=[Loaded java.lang.OutOfMemoryError</span></span>
<span class="line"><span>wrapper.filter.action.1000=NONE</span></span>
<span class="line"><span># (Simple match)</span></span>
<span class="line"><span>wrapper.filter.trigger.1001=java.lang.OutOfMemoryError</span></span>
<span class="line"><span># (Only match text in stack traces if -XX:+PrintClassHistogram is being used.)</span></span>
<span class="line"><span>#wrapper.filter.trigger.1001=Exception in thread &quot;*&quot; java.lang.OutOfMemoryError</span></span>
<span class="line"><span>#wrapper.filter.allow_wildcards.1001=TRUE</span></span>
<span class="line"><span>wrapper.filter.action.1001=RESTART</span></span>
<span class="line"><span>wrapper.filter.message.1001=The JVM has run out of memory.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper Email Notifications. (Requires Professional Edition)</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Common Event Email settings.</span></span>
<span class="line"><span>#wrapper.event.default.email.debug=TRUE</span></span>
<span class="line"><span>#wrapper.event.default.email.smtp.host=&lt;SMTP_Host&gt;</span></span>
<span class="line"><span>#wrapper.event.default.email.smtp.port=25</span></span>
<span class="line"><span>#wrapper.event.default.email.subject=[%WRAPPER_HOSTNAME%:%WRAPPER_NAME%:%WRAPPER_EVENT_NAME%] Event Notification</span></span>
<span class="line"><span>#wrapper.event.default.email.sender=&lt;Sender email&gt;</span></span>
<span class="line"><span>#wrapper.event.default.email.recipient=&lt;Recipient email&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Configure the log attached to event emails.</span></span>
<span class="line"><span>#wrapper.event.default.email.maillog=ATTACHMENT</span></span>
<span class="line"><span>#wrapper.event.default.email.maillog.lines=50</span></span>
<span class="line"><span>#wrapper.event.default.email.maillog.format=LPTM</span></span>
<span class="line"><span>#wrapper.event.default.email.maillog.loglevel=INFO</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Enable specific event emails.</span></span>
<span class="line"><span>#wrapper.event.wrapper_start.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_prelaunch.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_start.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_started.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_deadlock.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_stop.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_stopped.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_restart.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_failed_invocation.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_max_failed_invocations.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_kill.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_killed.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.jvm_unexpected_exit.email=TRUE</span></span>
<span class="line"><span>#wrapper.event.wrapper_stop.email=TRUE</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Specify custom mail content</span></span>
<span class="line"><span>wrapper.event.jvm_restart.email.body=The JVM was restarted.\\n\\nPlease check on its status.\\n</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># Wrapper Windows Service Properties</span></span>
<span class="line"><span>#********************************************************************</span></span>
<span class="line"><span># WARNING - Do not modify any of these properties when an application</span></span>
<span class="line"><span>#  using this configuration file has been installed as a service.</span></span>
<span class="line"><span>#  Please uninstall the service before modifying this section.  The</span></span>
<span class="line"><span>#  service can then be reinstalled.</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Name of the service</span></span>
<span class="line"><span>wrapper.name=khkj-store-web</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Display name of the service</span></span>
<span class="line"><span>wrapper.displayname=khkj-store-web</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Description of the service</span></span>
<span class="line"><span>wrapper.description=khkj-store-web</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Service dependencies.  Add dependencies as needed starting from 1</span></span>
<span class="line"><span>wrapper.ntservice.dependency.1=</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Mode in which the service is installed.  AUTO_START, DELAY_START or DEMAND_START</span></span>
<span class="line"><span>wrapper.ntservice.starttype=AUTO_START</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Allow the service to interact with the desktop (Windows NT/2000/XP only).</span></span>
<span class="line"><span>wrapper.ntservice.interactive=FALSE</span></span></code></pre></div><h2 id="部署脚本" tabindex="-1">部署脚本 <a class="header-anchor" href="#部署脚本" aria-label="Permalink to &quot;部署脚本&quot;">​</a></h2><p>Install</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@echo off</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo  Step 1: Install Java JDK</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo  ------begin----</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:: 退到上级目录</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cd ..</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:: 获取jdk 的全路径，全路径=当前路径+jdk路径</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:: &quot;%~dp0&quot; 这个是最起始的条用bat的cmd 的路径 所以我们要使用cd ..后退一个目录后用&quot;%cd%&quot; 来获取当前目录</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo  &quot;%~dp0&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;%cd%&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::设置jdkpath变量</span></span>
<span class="line"><span></span></span>
<span class="line"><span>set jdkpath=%cd%\\java\\jdk_1.8_win32</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo %jdkpath%</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::setx variable value -m</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:: setx 这个是用来设置环境变量的，并且会写入注册表. variable,会被覆盖,此操作不可逆的</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:: variable 代表键    value代表值    -m代表写入系统环境变量,如果没有该参数会写入当前用户环境变量.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>setx JAVA_HOME  &quot;%jdkpath%&quot;  -m</span></span>
<span class="line"><span></span></span>
<span class="line"><span>setx CLASSPATH  &quot;.;%%JAVA_HOME%%\\lib\\tools.jar;%%JAVA_HOME%%\\lib\\dt.jar&quot; -m</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::追加path环境变量  find 后面/i代表忽略大小写  &amp;&amp;执行成功执行的命令  ||执行失败执行的命令</span></span>
<span class="line"><span></span></span>
<span class="line"><span>set installedJDK=false</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo %Path%|find /i &quot;%JAVA_HOME%&quot; &amp;&amp; set installedJDK=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if %installedJDK% == false setx Path &quot;%%JAVA_HOME%%\\bin;%Path%&quot;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>reg add &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment&quot; /v Path /t REG_SZ /d &quot;%Path%;%%JAVA_HOME%%\\bin;%%JAVA_HOME%%\\jre\\bin&quot; /f</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo ----install zkemkeeper---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;%cd%&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::copy %cd%\\dll\\zkemkeeper.dll C:\\Windows\\SysWOW64</span></span>
<span class="line"><span>copy %cd%\\dll\\zkdll\\* C:\\Windows\\SysWOW64</span></span>
<span class="line"><span>C:\\Windows\\SysWOW64\\regsvr32  C:\\Windows\\SysWOW64\\zkemkeeper.dll</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo ----install khkj-db</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&quot;%cd%\\mysql\\mysql-5.7.24-winx64\\bin\\mysqld.exe&quot; install khkj-db</span></span>
<span class="line"><span></span></span>
<span class="line"><span>net start khkj-db</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sc config khkj-db start=auto</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::echo ----install khkj-store-web</span></span>
<span class="line"><span>::%cd%\\store-app\\wrapper\\bin\\wrapper -it  %cd%/store-app/wrapper/conf/store.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>exit</span></span></code></pre></div><p>Uninstall</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@echo off</span></span>
<span class="line"><span></span></span>
<span class="line"><span>title 正在卸载中，请不要关闭</span></span>
<span class="line"><span></span></span>
<span class="line"><span>color 0a</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::echo 停止并删除khkj-store-web</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::net stop khkj-store-web</span></span>
<span class="line"><span></span></span>
<span class="line"><span>::sc delete khkj-store-web</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo 停止并删除MySQL</span></span>
<span class="line"><span></span></span>
<span class="line"><span>net stop khkj-db</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sc delete khkj-db</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo 删除环境变量</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo 删除Java环境中...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>reg delete &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment&quot; /v JAVA_HOME /f</span></span>
<span class="line"><span></span></span>
<span class="line"><span>reg delete &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment&quot; /v CLASSPATH /f</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo 删除成功</span></span></code></pre></div><h1 id="其它" tabindex="-1">其它 <a class="header-anchor" href="#其它" aria-label="Permalink to &quot;其它&quot;">​</a></h1><h3 id="process-explorer" tabindex="-1">Process Explorer <a class="header-anchor" href="#process-explorer" aria-label="Permalink to &quot;Process Explorer&quot;">​</a></h3><p>Process Explorer使用图文教程, 可以用来查看Windows详细进程:</p><ul><li><a href="https://blog.csdn.net/a3125504x/article/details/77835811" target="_blank" rel="noreferrer">https://blog.csdn.net/a3125504x/article/details/77835811</a></li></ul><h3 id="session0穿透" tabindex="-1">Session0穿透 <a class="header-anchor" href="#session0穿透" aria-label="Permalink to &quot;Session0穿透&quot;">​</a></h3><ul><li><a href="https://bbs.csdn.net/topics/392161230" target="_blank" rel="noreferrer">https://bbs.csdn.net/topics/392161230</a></li><li><a href="http://www.cnblogs.com/therock/articles/2261371.html" target="_blank" rel="noreferrer">http://www.cnblogs.com/therock/articles/2261371.html</a></li></ul><h3 id="windows-常用的命令" tabindex="-1">Windows 常用的命令 <a class="header-anchor" href="#windows-常用的命令" aria-label="Permalink to &quot;Windows 常用的命令&quot;">​</a></h3><ul><li><a href="https://blog.csdn.net/qq%5C_32451373/article/details/77743869" target="_blank" rel="noreferrer">https://blog.csdn.net/qq\\_32451373/article/details/77743869</a></li></ul><h3 id="chrome-web-driver配置参数" tabindex="-1">Chrome WEB-Driver配置参数 <a class="header-anchor" href="#chrome-web-driver配置参数" aria-label="Permalink to &quot;Chrome WEB-Driver配置参数&quot;">​</a></h3><ul><li><a href="https://www.jianshu.com/p/04848a35fe0a" target="_blank" rel="noreferrer">https://www.jianshu.com/p/04848a35fe0a</a></li></ul><h3 id="java从终端获取输入" tabindex="-1">JAVA从终端获取输入 <a class="header-anchor" href="#java从终端获取输入" aria-label="Permalink to &quot;JAVA从终端获取输入&quot;">​</a></h3><ul><li><a href="https://www.cnblogs.com/iwinson/p/6075303.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/iwinson/p/6075303.html</a></li><li><a href="http://www.cnblogs.com/iwinson/p/6075287.html" target="_blank" rel="noreferrer">http://www.cnblogs.com/iwinson/p/6075287.html</a></li></ul><h3 id="中控考勤机配置" tabindex="-1">中控考勤机配置 <a class="header-anchor" href="#中控考勤机配置" aria-label="Permalink to &quot;中控考勤机配置&quot;">​</a></h3><ul><li><a href="https://blog.csdn.net/qq%5C_24511731/article/details/55049918" target="_blank" rel="noreferrer">https://blog.csdn.net/qq\\_24511731/article/details/55049918</a></li></ul><p>本文转自 <a href="https://pdai.tech" target="_blank" rel="noreferrer">https://pdai.tech</a>，如有侵权，请联系删除。</p>`,58)]))}const w=s(l,[["render",i]]);export{u as __pageData,w as default};
