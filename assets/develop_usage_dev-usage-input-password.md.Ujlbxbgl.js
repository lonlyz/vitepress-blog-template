import{_ as a,c as t,ai as p,o}from"./chunks/framework.BrYByd3F.js";const h=JSON.parse('{"title":"Input Password防止自动填充","description":"","frontmatter":{},"headers":[],"relativePath":"develop/usage/dev-usage-input-password.md","filePath":"develop/usage/dev-usage-input-password.md","lastUpdated":1737706346000}'),s={name:"develop/usage/dev-usage-input-password.md"};function r(n,e,d,l,i,u){return o(),t("div",null,e[0]||(e[0]=[p('<h1 id="input-password防止自动填充" tabindex="-1">Input Password防止自动填充 <a class="header-anchor" href="#input-password防止自动填充" aria-label="Permalink to &quot;Input Password防止自动填充&quot;">​</a></h1><blockquote><p>在项目中常需要修改或者填写密码，假设浏览器已经记住密码，常会通过autocomplete=off设置防止自动填充type=password的字段。但是大多数情况这样设置是无效的。 @pdai</p></blockquote><h2 id="防止password-自动填充" tabindex="-1">防止Password 自动填充 <a class="header-anchor" href="#防止password-自动填充" aria-label="Permalink to &quot;防止Password 自动填充&quot;">​</a></h2><p>autocomplete的含义，官网参考如下:</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete#Values" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete#Values</a></p><p>在autocomplete的文档中说明了value为off时，浏览器禁止给当前字段自动的输入或者选中一个值，但下方Note言明: 在大多数现代浏览器中，off 值不能阻止浏览器的密码管理工具自动填充.</p><h3 id="方式一-动态设置密码-input-标签-type" tabindex="-1">方式一 : 动态设置密码 input 标签 type <a class="header-anchor" href="#方式一-动态设置密码-input-标签-type" aria-label="Permalink to &quot;方式一 : 动态设置密码 input 标签 type&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;input type=&quot;text&quot; onfocus=&quot;this.type=&#39;password&#39;&quot;&gt;&lt;/input&gt;</span></span></code></pre></div><p>这样设置 可以保证用户在点击密码框之前，避免浏览器识别为登录表单、自动填充。</p><p>浏览器是如何判断当前表单需要 autocomplete，浏览器自动保存表单是当前 form 存在 type 为 password 的input、且该 input 为表单中的第二个 input 输入框。</p><p>所以，这里给 password 设置初始 type 为 text，在用户 点击 input 聚焦后 设置 type 为 password ，避免浏览器在 页面 onload 之后判断登录表单进行回填。这样可以解决大部分场景下对于避免回填的需要。然而我们的业务需要 依据跳转链接中的 param 给用户填充 密码，这就导致了在用户 主动 focus 之前，密码会被明文展示，聚焦后又会隐藏，操作体验不佳；</p><h3 id="方式二-page-onload-后-js-控制-input-type" tabindex="-1">方式二 : page.onload 后 js 控制 input type <a class="header-anchor" href="#方式二-page-onload-后-js-控制-input-type" aria-label="Permalink to &quot;方式二 : page.onload 后 js 控制 input type&quot;">​</a></h3><p>方法同上，问题点在于 页面load 后手动设置 input type 为 password，而后根据 page url 参数 填充表单。</p><p>但存在问题是 浏览器填充的时机无法控制，导致业务填充表单被自动填充覆盖；方案pass；</p><h3 id="方式三-new-password" tabindex="-1">方式三: new-password <a class="header-anchor" href="#方式三-new-password" aria-label="Permalink to &quot;方式三: new-password&quot;">​</a></h3><p>autocomplete 除了 on、off 之外，还有很多参数: name、email、username、new-password、current-password、street-address 等等；</p><p>当 input type 为 password 但 autocomplete 为 new-password， 即可解决浏览器自动填充问题，浏览器将当前输入框识别为新密码，便不会自阿东填充值。(PS: 有例子提到，设置 autocomplete 为一个 任意字符串 ，也能达到相同效果，大家可以试一下)</p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p>本文转自 <a href="https://pdai.tech" target="_blank" rel="noreferrer">https://pdai.tech</a>，如有侵权，请联系删除。</p>',19)]))}const m=a(s,[["render",r]]);export{h as __pageData,m as default};
